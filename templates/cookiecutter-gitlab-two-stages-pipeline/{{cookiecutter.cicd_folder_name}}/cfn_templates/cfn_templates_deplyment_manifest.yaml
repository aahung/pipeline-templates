testing:
  - template: deployer.yaml
    region: $testing_region
    output-env-var-mapping:
      Deployer: deployer_arn
  - template: stage_resources.yaml
    region: $testing_region
    parameter_overrides:
      DeployerArn: $deployer_arn
      DeployerRoleArn: $testing_deployer_role
      CFNDeploymentRoleArn: $testing_cfn_deployment_role
      ArtifactsBucketArn: $testing_artifacts_bucket
    output-env-var-mapping:
      DeployerRole: $testing_deployer_role
      CFNDeploymentRole: $testing_cfn_deployment_role
      ArtifactsBucket: $testing_artifacts_bucket
prod:
  - template: stage_resources.yaml
    region: $prod_region
    parameter_overrides:
      DeployerArn: $deployer_arn
      DeployerRoleArn: $prod_deployer_role
      CFNDeploymentRoleArn: $prod_cfn_deployment_role
      ArtifactsBucketArn: $prod_artifacts_bucket
    output-env-var-mapping:
      DeployerRole: $prod_deployer_role
      CFNDeploymentRole: $prod_cfn_deployment_role
      ArtifactsBucket: $prod_artifacts_bucket
